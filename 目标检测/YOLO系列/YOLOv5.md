## YOLOV5 目标检测原理

源码仓库地址：https://github.com/ultralytics/yolov5
源码目录结构：
- data
  - images:包含测试的图片
  - scripts:用于下载数据集的脚本
  - yaml文件：主要包括具体数据集的 yaml 文件以及训练超参数的 yaml 文件
- models: 主要用于构建模型的目录
- utils: 用于存放小工具代码目录
- train.py：训练程序
- test.py：测试程序
- detect.py：检测程序

#### 模型构建

`models` 目录下包含许多和模型相关的 yaml 文件，例如 `yolov5l.yaml` 等。这些 yaml 文件主要包含以下几个内容：
- nc:表示训练数据集的类别数目
- depth_multiple：深度因子，yolo 中主要使用该参数控制某些模块的重复次数
- width_multiple：宽度因子，主要用于控制特征图通道数目
- anchors: 锚框
- backbone: 骨架网络的参数
- head: 包括多尺度融合和预测头部分的网络参数

yolov5 初始化了 9 中不同尺度的锚框类型，分别在不同层次的特征图上使用，浅层的特征图对应的感受野较小，主要用于检测小目标，所以对应的锚框尺度也相对小。深层特征图的下采样倍率较大，感受野也相对较大，适合检测大目标，所以锚框相对大。由于 yolov5 主要使用了三层的特征图大小用于目标检测，故每个层级的特征图对应于3个锚框尺度。

backbone 参数解析：
- from 表示从那一层获得输入数据， -1 表示上一层
- number 表示该模块重复的次数
- module 表示网络层的名字
- args 
```yaml
# YOLOv5 backbone
backbone:
  # [from, number, module, args]
  [[-1, 1, Focus, [64, 3]],  # 0-P1/2
   [-1, 1, Conv, [128, 3, 2]],  # 1-P2/4
   [-1, 3, C3, [128]],
   [-1, 1, Conv, [256, 3, 2]],  # 3-P3/8
   [-1, 9, C3, [256]],
   [-1, 1, Conv, [512, 3, 2]],  # 5-P4/16
   [-1, 9, C3, [512]],
   [-1, 1, Conv, [1024, 3, 2]],  # 7-P5/32
   [-1, 1, SPP, [1024, [5, 9, 13]]],
   [-1, 3, C3, [1024, False]],  # 9
  ]
```

