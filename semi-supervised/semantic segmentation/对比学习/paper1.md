## Bootstrapping Semantic Segmentation with Regional Contrast(2021)
该篇论文主要涉及对比学习在半监督语义分割任务中的应用，整体的分割网络学习一个映射函数实现 RGB 图像到类别标签的预测。整体的网络结构包含三个部分，一个编码器，一个解码器分类预测
头以及解码器特征学习头。特征学习头主要是将特征图每个位置映射成一个高维向量，用于表示该单元处的特征表示。

![image](https://user-images.githubusercontent.com/62278179/222355489-110c768d-9788-4f6d-9d64-56ad707c9f3e.png)

像素级别的对比损失函数，主要是拉拢相同语义的特征向量，拉远不同语义的特征向量。在本文中吧解码器特征头输出的高维特征向量称为 `query`。其具体损失函数计算如下所示：

![image](https://user-images.githubusercontent.com/62278179/222355984-ee7d528e-7927-4999-aa43-fc446bcf795d.png)

对于每个类别的正样本特征向量采用所有属于该类别的特征向量的均值作为其特征向量值。

本文作者还针对像素级别的 query 和 key，还采用了主动采样的策略。个人理解主要有以下几个原因：
- 像素级别的任务，计算所有特征点，会极大消耗计算和内存资源
- 在学习过程对于预测置信度比较高的类别，说明该网络对于该类别的分析能力已经很好，我们只需要针对一些容易混淆的类别进行着重学习即可

本文中主要分为以下两个采样：
- Active Key Sampling
为了更好的学习负样本，论文中采用了非均匀的采样策略，利用特征向量点积的方式计算不同类别之间的关联程度，在每个 batch 中不断更新该关联矩阵。

![image](https://user-images.githubusercontent.com/62278179/222358528-d19693e4-27fb-403f-9076-8a1a05328d0a.png)

- Active Query Sampling
在原始的像素空间中，不同类别的像素比例是不均衡的。训练过程容易被占据主导地位的像素类别所绑架，所以随机采样正样本特征向量是不合理的。论文作者根据预测的置信度，人为设定一个阈
值，用于区分不同难易的正样本。

![image](https://user-images.githubusercontent.com/62278179/222359469-554d765e-515f-4616-ae90-bfcb9b026d4e.png)
